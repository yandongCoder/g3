{"version":3,"file":null,"sources":["../../src/utils/select.js","../../src/graph/width.js","../../src/graph/height.js","../../src/graph/render.js","../../src/graph/data.js","../../src/graph/nodes.js","../../src/graph/node/index.js","../../src/graph/addNode.js","../../src/graph/hasNode.js","../../src/graph/clearNodes.js","../../src/graph/links.js","../../src/utils/getNodeById.js","../../src/graph/link/hasST.js","../../src/utils/getOffsetEndCoordinate.js","../../src/graph/link/getPath.js","../../src/graph/link/getStartArrow.js","../../src/graph/link/getEndArrow.js","../../src/graph/link/index.js","../../src/graph/addLink.js","../../src/graph/hasLink.js","../../src/graph/clearLinks.js","../../src/graph/init/appendPreDefs.js","../../src/graph/init/appendPreElement.js","../../src/graph/init/init.js","../../src/graph/draw/drawNodes.js","../../src/graph/draw/drawLinks.js","../../src/graph/draw/index.js","../../src/graph/index.js"],"sourcesContent":["export default function (selector) {\r\n    return typeof selector === \"string\"? document.querySelector(selector): selector;\r\n}","export default function (width) {\r\n    if(!arguments.length) {\r\n        return this._width;\r\n    }\r\n    \r\n    this._width = width;\r\n\r\n    return this;\r\n}","export default function (height) {\r\n    if(!arguments.length) {\r\n        return this._height;\r\n    }\r\n    this._height = height;\r\n\r\n    return this;\r\n}","export default function () {\r\n    this._init();\r\n    this._draw();\r\n}","export default function (data) {\r\n    if(!arguments.length){\r\n        return data;\r\n    }\r\n    this._data = data;\r\n    return this;\r\n}","export default function (nodes, cover) {\r\n    if(!Array.isArray(nodes)){\r\n        nodes = [nodes];\r\n    }\r\n\r\n    if(!arguments.length){\r\n        return this._nodes;\r\n    }\r\n\r\n    if(cover){\r\n        this.clearNodes();\r\n    }\r\n\r\n    nodes.forEach(function(v){\r\n        this.addNode(v);\r\n    },this);\r\n\r\n    return this;\r\n}","export default function Node(data) {\r\n    this.id = data.id;\r\n    this.x = data.x;\r\n    this.y = data.y;\r\n}\r\n\r\nNode.prototype = {\r\n    constructor: Node,\r\n    getId: function () {\r\n        return this.id;\r\n    },\r\n    getColor: function () {\r\n        return this.color || \"#123456\";\r\n    },\r\n    getTranslate: function () {\r\n        return \"translate(\" + this.x + \",\" + this.y + \")\";\r\n    }\r\n};","import Node from \"./node/index\";\r\n\r\nexport default function (obj) {\r\n    var node = new Node(obj);\r\n    if(!this.hasNode(node)) this._nodes.push(node);\r\n}\r\n","export default function (node) {\r\n    var ids = this._nodes.map(function(d){return d.id});\r\n\r\n    return ids.indexOf(node.id) !== -1;\r\n}","export default function () {\r\n    this._nodes = [];\r\n}","export default function (links, cover) {\r\n    if(!Array.isArray(links)){\r\n        links = [links];\r\n    }\r\n\r\n    if(!arguments.length){\r\n        return this._links;\r\n    }\r\n\r\n    if(cover){\r\n        this.clearLinks();\r\n    }\r\n\r\n    links.forEach(function(v){\r\n        this.addLink(v);\r\n    },this);\r\n    console.log(this._links);\r\n    return this;\r\n}","export default function (id, Nodes) {\r\n    return Nodes.filter(function(d){\r\n        return d.id === id;\r\n    })[0];\r\n}","//Link has source and target Node in _nodes\r\nexport default function () {\r\n    return (this.source !== undefined) && (this.target !== undefined);\r\n}","export default function (Xs, Ys, Xd, Yd, offsetLength) {\r\n    var offsetScale = d3.scaleLinear().domain([1, 20]).range([25, 50]).clamp(true);\r\n    var s = offsetScale(offsetLength) || 30;\r\n\r\n    var l = Math.sqrt((Xd - Xs) * (Xd - Xs) + (Yd - Ys) * (Yd - Ys));\r\n    var sin = (Yd - Ys) / l;\r\n    var cos = (Xd - Xs) / l;\r\n    return {\r\n        x: Xd - s * cos,\r\n        y: Yd - s * sin\r\n    }\r\n}","import getOffsetEndCoordinate from \"../../utils/getOffsetEndCoordinate\";\r\n\r\nexport default function (r) {\r\n    var offset = getOffsetEndCoordinate(this.source.x, this.source.y, this.target.x, this.target.y, this.originalLinks ? this.originalLinks.length : 1);\r\n    var halfR = r / 2;\r\n\r\n    return 'M ' + (this.source.x + halfR) + ' ' + (this.source.y + halfR) + ' L ' + (offset.x + halfR) + ' ' + (offset.y + halfR);\r\n}","export default function () {\r\n    return \"url(\" + window.location.href.split('#')[0] + \"#start-arrow)\";\r\n}","export default function () {\r\n    return \"url(\" + window.location.href.split('#')[0] + \"#end-arrow)\";\r\n}","import getNodeById from \"../../utils/getNodeById\";\r\nimport hasST from \"./hasST\";\r\nimport getPath from \"./getPath\";\r\nimport getStartArrow from \"./getStartArrow\";\r\nimport getEndArrow from \"./getEndArrow\";\r\n\r\nexport default function Link(data, nodes) {\r\n    this.id = data.id;\r\n    this.label = data.label;\r\n    this.src = data.src;\r\n    this.dst = data.dst;\r\n\r\n    this.source = getNodeById(this.src, nodes);\r\n    this.target = getNodeById(this.dst, nodes);\r\n}\r\n\r\nLink.prototype = {\r\n    constructor: Link,\r\n    hasST: hasST,\r\n    getPath: getPath,\r\n    getStartArrow: getStartArrow,\r\n    getEndArrow: getEndArrow\r\n\r\n};","import Link from \"./link/index\";\r\n\r\nexport default function (obj) {\r\n    var link = new Link(obj, this._nodes);\r\n    if(!this.hasLink(link) && link.hasST()) this._links.push(link);\r\n}\r\n","export default function (link) {\r\n    var ids = this._links.map(function(d){return d.id});\r\n\r\n    return ids.indexOf(link.id) !== -1;\r\n}","export default function () {\r\n    this._links = [];\r\n}","export default function () {\r\n    let str = `<defs>\r\n                        <filter id=\"shadow\" x=\"-20%\" y=\"-20%\" width=\"200%\" height=\"200%\" type=\"Shadow\" shadowoffsetx=\"5\" shadowoffsety=\"5\" shadowblur=\"5\" shadowcolor=\"rgba(0,0,0)\">\r\n                            <feOffset result=\"offOut\" in=\"SourceGraphic\" dx=\"0\" dy=\"3\"></feOffset>\r\n                            <feColorMatrix result=\"matrixOut\" in=\"offOut\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\"></feColorMatrix>\r\n                            <feGaussianBlur result=\"blurOut\" in=\"matrixOut\" stdDeviation=\"2\"></feGaussianBlur>\r\n                            <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\"></feBlend>\r\n                        </filter>\r\n                        <marker id=\"start-arrow\" viewBox=\"0 -5 10 10\" refX=\"-6\" markerWidth=\"3\" markerHeight=\"3\" orient=\"auto\"><path d=\"M10,-5L0,0L10,5\"></path></marker>\r\n                        <marker id=\"end-arrow\" viewBox=\"0 -5 10 10\" refX=\"0\" markerWidth=\"3\" markerHeight=\"3\" orient=\"auto\"><path d=\"M0,-5L10,0L0,5\"></path></marker>\r\n                        <marker id=\"end-arrow-hover\" viewBox=\"0 -5 10 10\" refX=\"0\" markerWidth=\"3\" markerHeight=\"3\" orient=\"auto\"><path d=\"M0,-5L10,0L0,5\"></path></marker>\r\n                        <marker id=\"end-arrow-selected\" viewBox=\"0 -5 10 10\" refX=\"0\" markerWidth=\"3\" markerHeight=\"3\" orient=\"auto\"><path d=\"M0,-5L10,0L0,5\"></path></marker>\r\n                        <radialGradient id=\"linear\" cx=\"50%\" cy=\"50%\" r=\"50%\" fx=\"50%\" fy=\"50%\">\r\n                            <stop offset=\"0%\" style=\"stop-color:rgb(255，255,255);stop-opacity:0\" />\r\n                            <stop offset=\"90%\" style=\"stop-color:rgb(255,255,255);stop-opacity:1\" />\r\n                            <stop offset=\"98%\" style=\"stop-color:rgb(255,255,255);stop-opacity:1\" />\r\n                            <stop offset=\"100%\" style=\"stop-color:rgb(222，222, 222);stop-opacity:1\" />\r\n                        </radialGradient>\r\n                </defs>`;\r\n\r\n    this._svg.insertAdjacentHTML(\"afterbegin\", str);\r\n}","export default function () {\r\n    var svg = d3.select(this._svg);\r\n    svg.append(\"g\").attr(\"class\", \"brush\");\r\n\r\n    var forceGroup = svg.append('g').attr('class', 'force');\r\n    forceGroup.append(\"g\").attr(\"class\", \"links\");\r\n    forceGroup.append(\"g\").attr(\"class\", \"paths\");\r\n    forceGroup.append(\"g\").attr(\"class\", \"link-labels\");\r\n    forceGroup.append(\"g\").attr(\"class\", \"nodes\");\r\n}","import appendPreDefs from \"./appendPreDefs\";\r\nimport appendPreElement from \"./appendPreElement\";\r\n\r\nvar init = false;\r\nexport default function () {\r\n    if(!init){\r\n        d3.select(this._svg).classed(\"graph\", true);\r\n        appendPreElement.call(this);\r\n        appendPreDefs.call(this);\r\n        init = true;\r\n    }\r\n}","export default function () {\r\n\r\n    var nodes = d3.select('svg .nodes').selectAll(\"g.node\").data(this._nodes, function (d) {\r\n        return d.id;\r\n    });\r\n\r\n    var g = nodes.enter().append('g')\r\n        .attr(\"transform\", function (node) {\r\n            return node.getTranslate();\r\n        })\r\n        .classed('node', true);\r\n    \r\n    //添加矩形\r\n    g.append(\"rect\")\r\n        .attr(\"width\", this._r)\r\n        .attr(\"height\", this._r)\r\n        .attr(\"filter\", \"url(\" + window.location.href.split('#')[0] + \"#shadow)\")\r\n        .style(\"fill\", function(Node){ return Node.getColor() });\r\n}","export default function () {\r\n    var self = this;\r\n    var linkPaths = d3.select('.paths').selectAll('path').data(this._links, function (d) {\r\n        return d.id;\r\n    });\r\n\r\n    linkPaths.enter()\r\n        .append('path')\r\n        .classed('link-path', true)\r\n        .attr('d', function (Link) {\r\n            return Link.getPath(self._r)\r\n        })\r\n        .style('marker-start', function (Link) {\r\n            return Link.getStartArrow();\r\n        })\r\n        .style('marker-end', function (Link) {\r\n            return Link.getEndArrow();\r\n        });\r\n}","import drawNodes from \"./drawNodes\";\r\nimport drawLinks from \"./drawLinks\";\r\n\r\n\r\nexport default function () {\r\n    drawNodes.call(this);\r\n    drawLinks.call(this);\r\n}","import select from \"../utils/select\";\r\nimport width from \"./width\";\r\nimport height from \"./height\";\r\nimport render from \"./render\";\r\nimport data from \"./data\";\r\nimport nodes from \"./nodes\";\r\nimport addNode from \"./addNode\";\r\nimport hasNode from \"./hasNode\";\r\nimport clearNodes from \"./clearNodes\";\r\nimport links from \"./links\";\r\nimport addLink from \"./addLink\";\r\nimport hasLink from \"./hasLink\";\r\nimport clearLinks from \"./clearLinks\";\r\nimport init from \"./init/init\";\r\nimport draw from \"./draw/index\";\r\n\r\nfunction Graph(selector) {\r\n    this._svg = select(selector);\r\n    this._r = 30;\r\n    this._nodes = [];\r\n    this._links = [];\r\n}\r\n\r\nGraph.prototype = {\r\n    constructor: Graph,\r\n    width: width,\r\n    height: height,\r\n    render: render,\r\n    data: data,\r\n    nodes: nodes,\r\n    addNode: addNode,\r\n    clearNodes: clearNodes,\r\n    hasNode: hasNode,\r\n    links: links,\r\n    addLink: addLink,\r\n    hasLink: hasLink,\r\n    clearLinks: clearLinks,\r\n    _init: init,\r\n    _draw: draw\r\n};\r\n\r\nexport default function (selector) {\r\n    return new Graph(selector);\r\n}"],"names":["selector","document","querySelector","width","arguments","length","_width","height","_height","_init","_draw","data","_data","nodes","cover","Array","isArray","_nodes","clearNodes","forEach","v","addNode","Node","id","x","y","prototype","constructor","getId","getColor","color","getTranslate","obj","node","hasNode","push","ids","map","d","indexOf","links","_links","clearLinks","addLink","console","log","Nodes","filter","source","undefined","target","Xs","Ys","Xd","Yd","offsetLength","offsetScale","d3","scaleLinear","domain","range","clamp","s","l","Math","sqrt","sin","cos","r","offset","getOffsetEndCoordinate","originalLinks","halfR","window","location","href","split","Link","label","src","dst","getNodeById","hasST","getPath","getStartArrow","getEndArrow","link","hasLink","str","_svg","insertAdjacentHTML","svg","select","append","attr","forceGroup","init","classed","appendPreElement","call","appendPreDefs","selectAll","g","enter","_r","style","self","linkPaths","drawNodes","drawLinks","Graph","render","draw"],"mappings":"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"}